[package]
name = "functional-rusty"
version = "0.1.0"
edition = "2024"
rust-version = "1.92.0"
authors = ["functional-rusty contributors"]
description = "A functional programming library for Rust providing type classes, persistent data structures, and effect systems"
license = "MIT OR Apache-2.0"
repository = "https://github.com/functional-rusty/functional-rusty"
keywords = ["functional", "monad", "functor", "persistent", "immutable"]
categories = ["data-structures", "rust-patterns"]

[dependencies]
functional-rusty-derive = { path = "functional-rusty-derive", optional = true }
tokio = { version = "^1.0", features = ["rt", "rt-multi-thread", "time", "sync", "macros"], optional = true }
futures = { version = "^0.3", optional = true }

[dev-dependencies]
rstest = "^0.24"
proptest = "1.5"
functional-rusty-derive = { path = "functional-rusty-derive" }
tokio = { version = "1", features = ["rt", "rt-multi-thread", "time", "sync", "macros"] }

[features]
default = ["typeclass"]

# Enable all features
full = ["typeclass", "compose", "control", "persistent", "optics", "derive", "effect", "async"]

# Phase 1: Type class foundation
typeclass = []

# Phase 2: Function composition utilities
compose = ["typeclass"]

# Phase 3: Control structures (Lazy, Trampoline, etc.)
control = ["typeclass"]

# Phase 4: Persistent data structures
persistent = ["typeclass", "control"]

# Phase 5: Optics (Lens, Prism, etc.)
optics = ["typeclass", "persistent"]

# Phase 5.5: Derive macros for Optics
derive = ["optics", "dep:functional-rusty-derive"]

# Phase 6: Effect system
effect = ["typeclass", "control"]

# Phase 7: Async effect system
async = ["effect", "dep:tokio", "dep:futures"]

[lints.rust]
unsafe_code = "forbid"

[lints.clippy]

# Allow certain patterns that are common in functional programming
module_name_repetitions = "allow"
must_use_candidate = "allow"
