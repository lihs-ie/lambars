# Payload Variation Test - Heavy
#
# Tests system performance with heavy payload size (100 tags, 200 subtasks).
# Stress test for systems handling very large task data.
#
# Payload characteristics:
#   - Tags: 100
#   - Subtasks: 200
#   - Description: ~5000 characters
#   - Estimated size: ~25 KB

name: "payload_variation_heavy"
description: "Performance test with heavy payload (100 tags, 200 subtasks, ~25 KB)"

# Backend configuration
storage_mode: postgres
cache_mode: redis

# Workload configuration
load_pattern: write_heavy  # Write-heavy to stress payload processing
cache_state: warm
data_scale: medium
payload_variant: heavy     # 100 tags, 200 subtasks
rps_profile: constant

# Load generation parameters
duration_seconds: 90       # Longer duration for heavy payloads
connections: 15            # Fewer connections due to payload size
threads: 4
warmup_seconds: 10
target_rps: 50             # Low target due to very large payloads

# Target endpoints (focus on write operations)
# NOTE: Endpoints are path-only. HTTP method is determined by the benchmark script.
endpoints:
  - "/tasks"
  - "/tasks/{id}"

# HTTP methods used by benchmark script
http_methods:
  - POST
  - PUT
  - PATCH

# Pool configuration
pool_sizes:
  database_pool_size: 25   # More DB connections for larger writes
  redis_pool_size: 30

# Worker configuration
worker_config:
  worker_threads: 4

# Expected metrics thresholds
thresholds:
  max_error_rate: 0.05      # Higher tolerance for heavy payloads
  p99_latency_ms: 1000      # Higher latency expected for heavy payload


# Metadata for result analysis
metadata:
  test_type: "payload_variation"
  endpoint: "mixed"
  payload: "large"
  cache_strategy: "write-through"
  hit_rate: 50
  fail_injection: 0
  retry: false
  profile: false
  payload_variant: "heavy"
  payload_size_bytes: 25000
  tag_count: 100
  subtask_count: 200
  purpose: "stress_test_large_payloads"
  tags:
    - "payload-variation"
    - "heavy"
    - "stress-test"
    - "large-payload"
